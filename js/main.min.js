google.load("visualization","1",{packages:["corechart"],language:"ja"});google.setOnLoadCallback(chart_this);function chart_this(){$.getJSON("js/employees.json",function(c){employee_data=c;array_data=[];sorted_for_total=_.sortBy(employee_data,function(d){return d.employees}).reverse();$.each(sorted_for_total,function(d,e){console.log(e);array_data.push([e.short_name,e.employees,""+e.name+" employees: "+e.employees.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")])});var c=new google.visualization.DataTable();c.addColumn("string","Department");c.addColumn("number","Employees");c.addColumn({type:"string",role:"tooltip"});c.addRows(array_data);var a={title:"Total Employees (Logarithmic Scale)",vAxis:{title:"Department",titleTextStyle:{color:"black"}},height:800,hAxis:{logScale:true},colors:["slategray"]};var b=new google.visualization.BarChart(document.getElementById("employees_chart"));b.draw(c,a);$('[data-spy="scroll"]').each(function(){var d=$(this).scrollspy("refresh")})})}function workingDaysBetweenDates(b,g){if(g<b){return 0}var a=86400*1000;g.setHours(23,59,59,999);var f=g-b;var h=Math.ceil(f/a);var e=Math.floor(h/7);var h=h-(e*2);var d=b.getDay();var c=g.getDay();if(d-c>1){h=h-2}if(d==0&&c!=6){h=h-1}if(c==6&&d!=0){h=h-1}if((b<new Date("October 14, 2013 00:00:00 EDT"))&&(g>new Date("October 14, 2013 00:00:00 EDT"))){h=h-1}return h}function getHoursLost(){var a=new Date("October 01, 2013 00:00:00 EDT");var b=new Date();var e=b.getTime()+(b.getTimezoneOffset()*60000);var b=new Date(e+(3600000*-4));var g=new Date();var d=g.getTime()+(g.getTimezoneOffset()*60000);var g=new Date(d+(3600000*-4));g.setDate(g.getDate()-1);var c=(b-a)/1000;var f=Math.floor(c/86400);if(((b.getDay()+1)%7<2)||(b.getDate()==14&&b.getMonth()==9)){return(workingDaysBetweenDates(a,g))*6400000}else{return(workingDaysBetweenDates(a,g)-f)*6400000+Math.floor((c*800000)/10800)}};